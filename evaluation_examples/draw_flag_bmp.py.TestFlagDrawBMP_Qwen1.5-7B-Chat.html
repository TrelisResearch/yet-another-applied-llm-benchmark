
    <style>
      body {
      }
    code {
        white-space: pre-wrap;
        display: block;
        margin: 1em;
        padding: 1em;
        background: #eee;
        border-radius: .5em;
    }
    </style>
    
    <style>
    
        body {
            font-family: Arial, sans-serif;
        }

    .is_correct_0 {
      background: rgb(255, 170, 170);
    }

    .is_correct_1 {
      background: rgb(170, 255, 170);
    }

        p {margin: 0em; }
        h1 {margin: 0em; }
        h2 {margin: 0em; }
        h3 {margin: 0em; }
        h4 {margin: 0em; }
        h5 {margin: 0em; }
        h6 {margin: 0em; }
        h7 {margin: 0em; }
        h8 {margin: 0em; }

        
    
        .tabs {
            list-style-type: none;
            overflow: hidden;
            background-color: #eef;
            position: fixed;
            top: 0px;
            width: 100%;
            padding: .2em;
            margin: 0;
        }

        .tabs li {
            float: left;
        }

        .tabs li a {
            display: block;
            color: black;
            text-align: center;
            padding: 14px 16px;
            text-decoration: none;
            transition: 0.3s;
            background-color: inherit;
            border: 1px solid #ddd;
            border-bottom: none;
            transition: filter 0.3s ease; 
        }


        .tabs li a:hover {
            filter: brightness(120%); /* Increase brightness on hover */
        }

        .tab-content {
            white-space: pre-wrap;
            display: none;
            padding: 20px;
        }

        .tab-content:target {
            padding-top: 2em;
            display: block;
        }
    </style>
    
<ul class="tabs">
    <li><a href="index.html">Full Grid</a></li> <li class="is_correct_0"><a href="#tab1">Trial 1</a></li>
</ul>
    
<div class="clear-float"></div>
    
<div id="tab1" class="tab-content">
    <h1>Initial Query</h1>
<p>Write me a C program that emits a .bmp that's a depiction of an american flag to stdout.</p>
<h1>LLM Generation</h1>
<h2>Query</h2>
<p>Write me a C program that emits a .bmp that's a depiction of an american flag to stdout.</p>
<h2>Output</h2>
<p>Here's a simple C program that outputs an American flag in BMP format to the standard output (stdout). The program uses the `fopen`, `fwrite`, and `fclose` functions to write the BMP file. Note that this code doesn't include error handling, so you might want to add error checks for a production-ready program.

<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>

<span class="cp">#define FLAG_WIDTH 192</span>
<span class="cp">#define FLAG_HEIGHT 128</span>
<span class="cp">#define RED   255</span>
<span class="cp">#define GREEN 0</span>
<span class="cp">#define BLUE  0</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">header_size</span><span class="p">;</span><span class="w">          </span><span class="c1">// 54 bytes</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">file_size</span><span class="p">;</span><span class="w">           </span><span class="c1">// Size of the file</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">reserved1</span><span class="p">;</span><span class="w">           </span><span class="c1">// Always 0</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">reserved2</span><span class="p">;</span><span class="w">           </span><span class="c1">// Always 0</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">data_offset</span><span class="p">;</span><span class="w">          </span><span class="c1">// Offset to pixel data</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">header_checksum</span><span class="p">;</span><span class="w">      </span><span class="c1">// Checksum of the header</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_offset</span><span class="p">;</span><span class="w">        </span><span class="c1">// Offset to image data</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_size</span><span class="p">;</span><span class="w">          </span><span class="c1">// Size of the image data</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">planes</span><span class="p">;</span><span class="w">              </span><span class="c1">// 1 (grayscale)</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">bits_per_pixel</span><span class="p">;</span><span class="w">      </span><span class="c1">// 1 (8-bit)</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">compression</span><span class="p">;</span><span class="w">         </span><span class="c1">// 0 (No compression)</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_width</span><span class="p">;</span><span class="w">         </span><span class="c1">// 192</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_height</span><span class="p">;</span><span class="w">        </span><span class="c1">// 128</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">colors_used</span><span class="p">;</span><span class="w">         </span><span class="c1">// 1 (Red)</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">colors_important</span><span class="p">;</span><span class="w">    </span><span class="c1">// 1 (Red)</span>
<span class="p">}</span><span class="w"> </span><span class="n">BMPHeader</span><span class="p">;</span>

<span class="c1">// Function to calculate the checksum of the BMP header</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">calculate_header_checksum</span><span class="p">(</span><span class="n">BMPHeader</span><span class="o">*</span><span class="w"> </span><span class="n">header</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">BMPHeader</span><span class="p">);</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">~</span><span class="n">sum</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFFFF</span><span class="p">;</span><span class="w"> </span><span class="c1">// Invert and take the 16-bit complement</span>
<span class="p">}</span>

<span class="c1">// Function to create a BMP file with the American flag</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">create_flag_bmp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BMPHeader</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">header_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">54</span><span class="p">,</span><span class="w">      </span><span class="c1">// BMP header size</span>
<span class="w">        </span><span class="p">.</span><span class="n">file_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">header</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="c1">// Total file size</span>
<span class="w">        </span><span class="p">.</span><span class="n">header_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">   </span><span class="c1">// Initialize to 0</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">header</span><span class="p">),</span><span class="w"> </span><span class="c1">// Start of pixel data</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="c1">// Image data size</span>
<span class="w">        </span><span class="p">.</span><span class="n">planes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">            </span><span class="c1">// Grayscale</span>
<span class="w">        </span><span class="p">.</span><span class="n">bits_per_pixel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">    </span><span class="c1">// 24-bit (RGB)</span>
<span class="w">        </span><span class="p">.</span><span class="n">compression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">       </span><span class="c1">// No compression</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">       </span><span class="c1">// Red</span>
<span class="w">        </span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">  </span><span class="c1">// Red</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// Write the BMP header to stdout</span>
<span class="w">    </span><span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">BMPHeader</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stdout</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Calculate and update the checksum</span>
<span class="w">    </span><span class="n">header</span><span class="p">.</span><span class="n">header_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_header_checksum</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Write the flag pixels (Red, Green, Blue)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="p">;</span><span class="w"> </span><span class="n">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Flag pixels: Red (top), White (middle), Red (bottom)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">64</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">128</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// White (middle)</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// No importance</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Write the pixel values (Red, Green, Blue)</span>
<span class="w">            </span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RED</span><span class="p">;</span>
<span class="w">            </span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="n">fwrite</span><span class="p">(</span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stdout</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Write the final checksum</span>
<span class="w">    </span><span class="n">header</span><span class="p">.</span><span class="n">header_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_header_checksum</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">);</span>
<span class="w">    </span><span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">.</span><span class="n">header_checksum</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stdout</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Close the file</span>
<span class="w">    </span><span class="n">fclose</span><span class="p">(</span><span class="n">stdout</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">create_flag_bmp</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>


This program creates a 192x128 BMP file with the American flag, using the flag's colors (red, white, red). The flag is displayed in a simple way, with red at the top, white in the middle, and red at the bottom. The program writes the BMP file directly to stdout, so you'll need to redirect the output to a file or another program to view it.</p>
<h1>Extract Code</h1>
<p>I extracted the following code from that output:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>

<span class="cp">#define FLAG_WIDTH 192</span>
<span class="cp">#define FLAG_HEIGHT 128</span>
<span class="cp">#define RED   255</span>
<span class="cp">#define GREEN 0</span>
<span class="cp">#define BLUE  0</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">header_size</span><span class="p">;</span><span class="w">          </span><span class="c1">// 54 bytes</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">file_size</span><span class="p">;</span><span class="w">           </span><span class="c1">// Size of the file</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">reserved1</span><span class="p">;</span><span class="w">           </span><span class="c1">// Always 0</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">reserved2</span><span class="p">;</span><span class="w">           </span><span class="c1">// Always 0</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">data_offset</span><span class="p">;</span><span class="w">          </span><span class="c1">// Offset to pixel data</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">header_checksum</span><span class="p">;</span><span class="w">      </span><span class="c1">// Checksum of the header</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_offset</span><span class="p">;</span><span class="w">        </span><span class="c1">// Offset to image data</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_size</span><span class="p">;</span><span class="w">          </span><span class="c1">// Size of the image data</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">planes</span><span class="p">;</span><span class="w">              </span><span class="c1">// 1 (grayscale)</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">bits_per_pixel</span><span class="p">;</span><span class="w">      </span><span class="c1">// 1 (8-bit)</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">compression</span><span class="p">;</span><span class="w">         </span><span class="c1">// 0 (No compression)</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_width</span><span class="p">;</span><span class="w">         </span><span class="c1">// 192</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_height</span><span class="p">;</span><span class="w">        </span><span class="c1">// 128</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">colors_used</span><span class="p">;</span><span class="w">         </span><span class="c1">// 1 (Red)</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">colors_important</span><span class="p">;</span><span class="w">    </span><span class="c1">// 1 (Red)</span>
<span class="p">}</span><span class="w"> </span><span class="n">BMPHeader</span><span class="p">;</span>

<span class="c1">// Function to calculate the checksum of the BMP header</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">calculate_header_checksum</span><span class="p">(</span><span class="n">BMPHeader</span><span class="o">*</span><span class="w"> </span><span class="n">header</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">BMPHeader</span><span class="p">);</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">~</span><span class="n">sum</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFFFF</span><span class="p">;</span><span class="w"> </span><span class="c1">// Invert and take the 16-bit complement</span>
<span class="p">}</span>

<span class="c1">// Function to create a BMP file with the American flag</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">create_flag_bmp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BMPHeader</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">header_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">54</span><span class="p">,</span><span class="w">      </span><span class="c1">// BMP header size</span>
<span class="w">        </span><span class="p">.</span><span class="n">file_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">header</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="c1">// Total file size</span>
<span class="w">        </span><span class="p">.</span><span class="n">header_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">   </span><span class="c1">// Initialize to 0</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">header</span><span class="p">),</span><span class="w"> </span><span class="c1">// Start of pixel data</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="c1">// Image data size</span>
<span class="w">        </span><span class="p">.</span><span class="n">planes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">            </span><span class="c1">// Grayscale</span>
<span class="w">        </span><span class="p">.</span><span class="n">bits_per_pixel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">    </span><span class="c1">// 24-bit (RGB)</span>
<span class="w">        </span><span class="p">.</span><span class="n">compression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">       </span><span class="c1">// No compression</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">       </span><span class="c1">// Red</span>
<span class="w">        </span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">  </span><span class="c1">// Red</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// Write the BMP header to stdout</span>
<span class="w">    </span><span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">BMPHeader</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stdout</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Calculate and update the checksum</span>
<span class="w">    </span><span class="n">header</span><span class="p">.</span><span class="n">header_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_header_checksum</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Write the flag pixels (Red, Green, Blue)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="p">;</span><span class="w"> </span><span class="n">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Flag pixels: Red (top), White (middle), Red (bottom)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">64</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">128</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// White (middle)</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// No importance</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Write the pixel values (Red, Green, Blue)</span>
<span class="w">            </span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RED</span><span class="p">;</span>
<span class="w">            </span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="n">fwrite</span><span class="p">(</span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stdout</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Write the final checksum</span>
<span class="w">    </span><span class="n">header</span><span class="p">.</span><span class="n">header_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_header_checksum</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">);</span>
<span class="w">    </span><span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">.</span><span class="n">header_checksum</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stdout</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Close the file</span>
<span class="w">    </span><span class="n">fclose</span><span class="p">(</span><span class="n">stdout</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">create_flag_bmp</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>
</p>
<h1>Run Code Interpreter</h1>
<p>Running the following program:
<style>pre { line-height: 125%; }
td.linenos .normal { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
span.linenos { color: inherit; background-color: transparent; padding-left: 5px; padding-right: 5px; }
td.linenos .special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
span.linenos.special { color: #000000; background-color: #ffffc0; padding-left: 5px; padding-right: 5px; }
.highlight .hll { background-color: #ffffcc }
.highlight { background: #f8f8f8; }
.highlight .c { color: #3D7B7B; font-style: italic } /* Comment */
.highlight .err { border: 1px solid #FF0000 } /* Error */
.highlight .k { color: #008000; font-weight: bold } /* Keyword */
.highlight .o { color: #666666 } /* Operator */
.highlight .ch { color: #3D7B7B; font-style: italic } /* Comment.Hashbang */
.highlight .cm { color: #3D7B7B; font-style: italic } /* Comment.Multiline */
.highlight .cp { color: #9C6500 } /* Comment.Preproc */
.highlight .cpf { color: #3D7B7B; font-style: italic } /* Comment.PreprocFile */
.highlight .c1 { color: #3D7B7B; font-style: italic } /* Comment.Single */
.highlight .cs { color: #3D7B7B; font-style: italic } /* Comment.Special */
.highlight .gd { color: #A00000 } /* Generic.Deleted */
.highlight .ge { font-style: italic } /* Generic.Emph */
.highlight .ges { font-weight: bold; font-style: italic } /* Generic.EmphStrong */
.highlight .gr { color: #E40000 } /* Generic.Error */
.highlight .gh { color: #000080; font-weight: bold } /* Generic.Heading */
.highlight .gi { color: #008400 } /* Generic.Inserted */
.highlight .go { color: #717171 } /* Generic.Output */
.highlight .gp { color: #000080; font-weight: bold } /* Generic.Prompt */
.highlight .gs { font-weight: bold } /* Generic.Strong */
.highlight .gu { color: #800080; font-weight: bold } /* Generic.Subheading */
.highlight .gt { color: #0044DD } /* Generic.Traceback */
.highlight .kc { color: #008000; font-weight: bold } /* Keyword.Constant */
.highlight .kd { color: #008000; font-weight: bold } /* Keyword.Declaration */
.highlight .kn { color: #008000; font-weight: bold } /* Keyword.Namespace */
.highlight .kp { color: #008000 } /* Keyword.Pseudo */
.highlight .kr { color: #008000; font-weight: bold } /* Keyword.Reserved */
.highlight .kt { color: #B00040 } /* Keyword.Type */
.highlight .m { color: #666666 } /* Literal.Number */
.highlight .s { color: #BA2121 } /* Literal.String */
.highlight .na { color: #687822 } /* Name.Attribute */
.highlight .nb { color: #008000 } /* Name.Builtin */
.highlight .nc { color: #0000FF; font-weight: bold } /* Name.Class */
.highlight .no { color: #880000 } /* Name.Constant */
.highlight .nd { color: #AA22FF } /* Name.Decorator */
.highlight .ni { color: #717171; font-weight: bold } /* Name.Entity */
.highlight .ne { color: #CB3F38; font-weight: bold } /* Name.Exception */
.highlight .nf { color: #0000FF } /* Name.Function */
.highlight .nl { color: #767600 } /* Name.Label */
.highlight .nn { color: #0000FF; font-weight: bold } /* Name.Namespace */
.highlight .nt { color: #008000; font-weight: bold } /* Name.Tag */
.highlight .nv { color: #19177C } /* Name.Variable */
.highlight .ow { color: #AA22FF; font-weight: bold } /* Operator.Word */
.highlight .w { color: #bbbbbb } /* Text.Whitespace */
.highlight .mb { color: #666666 } /* Literal.Number.Bin */
.highlight .mf { color: #666666 } /* Literal.Number.Float */
.highlight .mh { color: #666666 } /* Literal.Number.Hex */
.highlight .mi { color: #666666 } /* Literal.Number.Integer */
.highlight .mo { color: #666666 } /* Literal.Number.Oct */
.highlight .sa { color: #BA2121 } /* Literal.String.Affix */
.highlight .sb { color: #BA2121 } /* Literal.String.Backtick */
.highlight .sc { color: #BA2121 } /* Literal.String.Char */
.highlight .dl { color: #BA2121 } /* Literal.String.Delimiter */
.highlight .sd { color: #BA2121; font-style: italic } /* Literal.String.Doc */
.highlight .s2 { color: #BA2121 } /* Literal.String.Double */
.highlight .se { color: #AA5D1F; font-weight: bold } /* Literal.String.Escape */
.highlight .sh { color: #BA2121 } /* Literal.String.Heredoc */
.highlight .si { color: #A45A77; font-weight: bold } /* Literal.String.Interpol */
.highlight .sx { color: #008000 } /* Literal.String.Other */
.highlight .sr { color: #A45A77 } /* Literal.String.Regex */
.highlight .s1 { color: #BA2121 } /* Literal.String.Single */
.highlight .ss { color: #19177C } /* Literal.String.Symbol */
.highlight .bp { color: #008000 } /* Name.Builtin.Pseudo */
.highlight .fm { color: #0000FF } /* Name.Function.Magic */
.highlight .vc { color: #19177C } /* Name.Variable.Class */
.highlight .vg { color: #19177C } /* Name.Variable.Global */
.highlight .vi { color: #19177C } /* Name.Variable.Instance */
.highlight .vm { color: #19177C } /* Name.Variable.Magic */
.highlight .il { color: #666666 } /* Literal.Number.Integer.Long */</style><div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span class="normal">  1</span>
<span class="normal">  2</span>
<span class="normal">  3</span>
<span class="normal">  4</span>
<span class="normal">  5</span>
<span class="normal">  6</span>
<span class="normal">  7</span>
<span class="normal">  8</span>
<span class="normal">  9</span>
<span class="normal"> 10</span>
<span class="normal"> 11</span>
<span class="normal"> 12</span>
<span class="normal"> 13</span>
<span class="normal"> 14</span>
<span class="normal"> 15</span>
<span class="normal"> 16</span>
<span class="normal"> 17</span>
<span class="normal"> 18</span>
<span class="normal"> 19</span>
<span class="normal"> 20</span>
<span class="normal"> 21</span>
<span class="normal"> 22</span>
<span class="normal"> 23</span>
<span class="normal"> 24</span>
<span class="normal"> 25</span>
<span class="normal"> 26</span>
<span class="normal"> 27</span>
<span class="normal"> 28</span>
<span class="normal"> 29</span>
<span class="normal"> 30</span>
<span class="normal"> 31</span>
<span class="normal"> 32</span>
<span class="normal"> 33</span>
<span class="normal"> 34</span>
<span class="normal"> 35</span>
<span class="normal"> 36</span>
<span class="normal"> 37</span>
<span class="normal"> 38</span>
<span class="normal"> 39</span>
<span class="normal"> 40</span>
<span class="normal"> 41</span>
<span class="normal"> 42</span>
<span class="normal"> 43</span>
<span class="normal"> 44</span>
<span class="normal"> 45</span>
<span class="normal"> 46</span>
<span class="normal"> 47</span>
<span class="normal"> 48</span>
<span class="normal"> 49</span>
<span class="normal"> 50</span>
<span class="normal"> 51</span>
<span class="normal"> 52</span>
<span class="normal"> 53</span>
<span class="normal"> 54</span>
<span class="normal"> 55</span>
<span class="normal"> 56</span>
<span class="normal"> 57</span>
<span class="normal"> 58</span>
<span class="normal"> 59</span>
<span class="normal"> 60</span>
<span class="normal"> 61</span>
<span class="normal"> 62</span>
<span class="normal"> 63</span>
<span class="normal"> 64</span>
<span class="normal"> 65</span>
<span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span></pre></div></td><td class="code"><div><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdlib.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;string.h&gt;</span>

<span class="cp">#define FLAG_WIDTH 192</span>
<span class="cp">#define FLAG_HEIGHT 128</span>
<span class="cp">#define RED   255</span>
<span class="cp">#define GREEN 0</span>
<span class="cp">#define BLUE  0</span>

<span class="k">typedef</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">header_size</span><span class="p">;</span><span class="w">          </span><span class="c1">// 54 bytes</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">file_size</span><span class="p">;</span><span class="w">           </span><span class="c1">// Size of the file</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">reserved1</span><span class="p">;</span><span class="w">           </span><span class="c1">// Always 0</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">reserved2</span><span class="p">;</span><span class="w">           </span><span class="c1">// Always 0</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">data_offset</span><span class="p">;</span><span class="w">          </span><span class="c1">// Offset to pixel data</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">header_checksum</span><span class="p">;</span><span class="w">      </span><span class="c1">// Checksum of the header</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_offset</span><span class="p">;</span><span class="w">        </span><span class="c1">// Offset to image data</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_size</span><span class="p">;</span><span class="w">          </span><span class="c1">// Size of the image data</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">planes</span><span class="p">;</span><span class="w">              </span><span class="c1">// 1 (grayscale)</span>
<span class="w">    </span><span class="kt">uint16_t</span><span class="w"> </span><span class="n">bits_per_pixel</span><span class="p">;</span><span class="w">      </span><span class="c1">// 1 (8-bit)</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">compression</span><span class="p">;</span><span class="w">         </span><span class="c1">// 0 (No compression)</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_width</span><span class="p">;</span><span class="w">         </span><span class="c1">// 192</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">image_height</span><span class="p">;</span><span class="w">        </span><span class="c1">// 128</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">colors_used</span><span class="p">;</span><span class="w">         </span><span class="c1">// 1 (Red)</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">colors_important</span><span class="p">;</span><span class="w">    </span><span class="c1">// 1 (Red)</span>
<span class="p">}</span><span class="w"> </span><span class="n">BMPHeader</span><span class="p">;</span>

<span class="c1">// Function to calculate the checksum of the BMP header</span>
<span class="kt">uint32_t</span><span class="w"> </span><span class="nf">calculate_header_checksum</span><span class="p">(</span><span class="n">BMPHeader</span><span class="o">*</span><span class="w"> </span><span class="n">header</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">size_t</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">BMPHeader</span><span class="p">);</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">sum</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">header</span><span class="p">[</span><span class="n">i</span><span class="p">];</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">~</span><span class="n">sum</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="mh">0xFFFF</span><span class="p">;</span><span class="w"> </span><span class="c1">// Invert and take the 16-bit complement</span>
<span class="p">}</span>

<span class="c1">// Function to create a BMP file with the American flag</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">create_flag_bmp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">BMPHeader</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="p">.</span><span class="n">header_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">54</span><span class="p">,</span><span class="w">      </span><span class="c1">// BMP header size</span>
<span class="w">        </span><span class="p">.</span><span class="n">file_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">header</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">),</span><span class="w"> </span><span class="c1">// Total file size</span>
<span class="w">        </span><span class="p">.</span><span class="n">header_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">   </span><span class="c1">// Initialize to 0</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">header</span><span class="p">),</span><span class="w"> </span><span class="c1">// Start of pixel data</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="c1">// Image data size</span>
<span class="w">        </span><span class="p">.</span><span class="n">planes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">            </span><span class="c1">// Grayscale</span>
<span class="w">        </span><span class="p">.</span><span class="n">bits_per_pixel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">24</span><span class="p">,</span><span class="w">    </span><span class="c1">// 24-bit (RGB)</span>
<span class="w">        </span><span class="p">.</span><span class="n">compression</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w">       </span><span class="c1">// No compression</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">image_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="p">,</span>
<span class="w">        </span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">       </span><span class="c1">// Red</span>
<span class="w">        </span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w">  </span><span class="c1">// Red</span>
<span class="w">    </span><span class="p">};</span>

<span class="w">    </span><span class="c1">// Write the BMP header to stdout</span>
<span class="w">    </span><span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="n">BMPHeader</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stdout</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Calculate and update the checksum</span>
<span class="w">    </span><span class="n">header</span><span class="p">.</span><span class="n">header_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_header_checksum</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Write the flag pixels (Red, Green, Blue)</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">FLAG_HEIGHT</span><span class="p">;</span><span class="w"> </span><span class="n">y</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="p">;</span><span class="w"> </span><span class="n">x</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// Flag pixels: Red (top), White (middle), Red (bottom)</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">64</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">128</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="p">;</span><span class="w"> </span><span class="c1">// White (middle)</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">6</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_offset</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="p">(</span><span class="n">y</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">FLAG_WIDTH</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">x</span><span class="p">);</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_used</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="p">;</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">colors_important</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// No importance</span>
<span class="w">                </span><span class="n">header</span><span class="p">.</span><span class="n">image_size</span><span class="w"> </span><span class="o">-=</span><span class="w"> </span><span class="mi">3</span><span class="p">;</span>
<span class="w">            </span><span class="p">}</span>

<span class="w">            </span><span class="c1">// Write the pixel values (Red, Green, Blue)</span>
<span class="w">            </span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RED</span><span class="p">;</span>
<span class="w">            </span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">            </span><span class="n">fwrite</span><span class="p">(</span><span class="n">header</span><span class="p">.</span><span class="n">image_data</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stdout</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="c1">// Write the final checksum</span>
<span class="w">    </span><span class="n">header</span><span class="p">.</span><span class="n">header_checksum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">calculate_header_checksum</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">);</span>
<span class="w">    </span><span class="n">fwrite</span><span class="p">(</span><span class="o">&amp;</span><span class="n">header</span><span class="p">.</span><span class="n">header_checksum</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">uint32_t</span><span class="p">),</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stdout</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// Close the file</span>
<span class="w">    </span><span class="n">fclose</span><span class="p">(</span><span class="n">stdout</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">create_flag_bmp</span><span class="p">();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div></td></tr></table></div>

And got the output:
<code>b"main.c:13:5: error: unknown type name 'uint16_t'\n   13 |     uint16_t header_size;          // 54 bytes\n      |     ^~~~~~~~\nmain.c:14:5: error: unknown type name 'uint32_t'\n   14 |     uint32_t file_size;           // Size of the file\n      |     ^~~~~~~~\nmain.c:15:5: error: unknown type name 'uint16_t'\n   15 |     uint16_t reserved1;           // Always 0\n      |     ^~~~~~~~\nmain.c:16:5: error: unknown type name 'uint16_t'\n   16 |     uint16_t reserved2;           // Always 0\n      |     ^~~~~~~~\nmain.c:17:5: error: unknown type name 'uint32_t'\n   17 |     uint32_t data_offset;          // Offset to pixel data\n      |     ^~~~~~~~\nmain.c:18:5: error: unknown type name 'uint32_t'\n   18 |     uint32_t header_checksum;      // Checksum of the header\n      |     ^~~~~~~~\nmain.c:19:5: error: unknown type name 'uint32_t'\n   19 |     uint32_t image_offset;        // Offset to image data\n      |     ^~~~~~~~\nmain.c:20:5: error: unknown type name 'uint32_t'\n   20 |     uint32_t image_size;          // Size of the image data\n      |     ^~~~~~~~\nmain.c:21:5: error: unknown type name 'uint32_t'\n   21 |     uint32_t planes;              // 1 (grayscale)\n      |     ^~~~~~~~\nmain.c:22:5: error: unknown type name 'uint16_t'\n   22 |     uint16_t bits_per_pixel;      // 1 (8-bit)\n      |     ^~~~~~~~\nmain.c:23:5: error: unknown type name 'uint32_t'\n   23 |     uint32_t compression;         // 0 (No compression)\n      |     ^~~~~~~~\nmain.c:24:5: error: unknown type name 'uint32_t'\n   24 |     uint32_t image_width;         // 192\n      |     ^~~~~~~~\nmain.c:25:5: error: unknown type name 'uint32_t'\n   25 |     uint32_t image_height;        // 128\n      |     ^~~~~~~~\nmain.c:26:5: error: unknown type name 'uint32_t'\n   26 |     uint32_t colors_used;         // 1 (Red)\n      |     ^~~~~~~~\nmain.c:27:5: error: unknown type name 'uint32_t'\n   27 |     uint32_t colors_important;    // 1 (Red)\n      |     ^~~~~~~~\nmain.c:31:1: error: unknown type name 'uint32_t'\n   31 | uint32_t calculate_header_checksum(BMPHeader* header) {\n      | ^~~~~~~~\nmain.c:5:1: note: 'uint32_t' is defined in header '&lt;stdint.h&gt;'; did you forget to '#include &lt;stdint.h&gt;'?\n    4 | #include &lt;string.h&gt;\n  +++ |+#include &lt;stdint.h&gt;\n    5 | \nmain.c: In function 'calculate_header_checksum':\nmain.c:32:5: error: unknown type name 'uint32_t'\n   32 |     uint32_t sum = 0;\n      |     ^~~~~~~~\nmain.c:32:5: note: 'uint32_t' is defined in header '&lt;stdint.h&gt;'; did you forget to '#include &lt;stdint.h&gt;'?\nmain.c:34:13: error: invalid operands to binary + (have 'int' and 'BMPHeader')\n   34 |         sum += header[i];\n      |             ^~ ~~~~~~~~~\n      |                      |\n      |                      BMPHeader\nmain.c: In function 'create_flag_bmp':\nmain.c:84:19: error: 'BMPHeader' has no member named 'image_data'\n   84 |             header.image_data[0] = RED;\n      |                   ^\nmain.c:85:19: error: 'BMPHeader' has no member named 'image_data'\n   85 |             header.image_data[1] = 0;\n      |                   ^\nmain.c:86:19: error: 'BMPHeader' has no member named 'image_data'\n   86 |             header.image_data[2] = 0;\n      |                   ^\nmain.c:87:26: error: 'BMPHeader' has no member named 'image_data'\n   87 |             fwrite(header.image_data, 3, 1, stdout);\n      |                          ^\nmain.c:93:44: error: 'uint32_t' undeclared (first use in this function)\n   93 |     fwrite(&amp;header.header_checksum, sizeof(uint32_t), 1, stdout);\n      |                                            ^~~~~~~~\nmain.c:93:44: note: 'uint32_t' is defined in header '&lt;stdint.h&gt;'; did you forget to '#include &lt;stdint.h&gt;'?\nmain.c:93:44: note: each undeclared identifier is reported only once for each function it appears in\nmain.sh: line 2: ./a.out: No such file or directory\n"</code></p>
<h1>LLM Generation</h1>
<h2>Query</h2>
<p>What flag is shown in this image?</p>
<h2>Output</h2>
<p>cannot identify image file &lt;_io.BytesIO object at 0x1374f57b0&gt;</p>
<h1>Check if any of the following conditions are true:</h1>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>America</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>USA</code>: False</p>
<h2>Substring Evaluation</h2>
<p>Testing if the previous output contains the string <code>United States</code>: False</p>
<h2>Final Answer: False</h2>
</div>
    